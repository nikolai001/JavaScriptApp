import LocalStorage from"./localStorage.js";import Dialog from"./dialog.js";const localStorage=new LocalStorage;export default class Todo{constructor(){this.enterButton=document.querySelector("#inputArea button"),this.input=document.querySelector("#inputArea input"),this.ul=document.querySelector("ul#toDoList"),localStorage.items.length>0&&this.loadFromLocalStorage(),this.enterButton.addEventListener("click",t=>{this.addItem(t)}),this.input.addEventListener("keypress",t=>{this.addItem(t)})}addItem(t){this.input.value.length>0&&("Enter"===t.key||void 0===t.key)&&this.createItem()}createItem(){const t=document.createElement("li");t.innerHTML=this.input.value+' <i class="far fa-trash-alt"></i>',this.ul.appendChild(t),this.input.value="",t.addEventListener("click",t=>{this.crossOut(t)}),t.querySelector("i").addEventListener("click",t=>{this.deleteListItem(t)}),localStorage.updateItems(this.ul)}crossOut(t){t.currentTarget.classList.toggle("done"),localStorage.updateItems(this.ul)}async deleteListItem(t){t.stopPropagation();const e=t.currentTarget.parentNode,o=new Dialog({questionText:"<h1>Er du sikker på du er sikker??</h1>",trueButtonText:"JA",falseButtonText:"NÆ"});await o.confirm()&&(console.log(123),e.remove(),localStorage.updateItems(this.ul))}loadFromLocalStorage(){let t="";localStorage.items.forEach(e=>{t+=e}),this.ul.innerHTML=t,this.ul.querySelectorAll("li").forEach(t=>{t.addEventListener("click",t=>{this.crossOut(t)}),t.querySelector("i").addEventListener("click",t=>{this.deleteListItem(t)})})}}